#JavaScript中的编码和解码


##基本概念
+ <small>比特（bit）：也可称为“位”，是计算机信息中的最小单位，是 binary digit（二进制数位） 的 缩写，指二进制中的一位
+ 字节（Byte）：计算机中信息计量的一种单位，一个位就代表“0”或“1”，每8个位（bit）组成一个字节（Byte）
+ 字符（Character）：文字与符号的总称，可以是各个国家的文字、标点符号、图形符号、数字等
+ 字符集（Character Set）：是多个字符的集合
+ 编码（Encoding）： 信息从一种形式或格式转换为另一种形式的过程
+ 解码（decoding）： 编码的逆过程
+ 字符编码（Character Encoding）： 按照何种规则存储字符</small>

##编码

二进制：（晶体管的通断表示0和1，1bit）

ASCII美国信息交换标准码：
	8个晶体管为一组，组成一个1Byte，可以产生256种组合；
	美国人使用其中的128种组合指定了ASCII，占用了0-127段；
	占用一个Byte中的后七位，第一位为0，如A是65(01000001)B是66(01000010)；
	包括终端状态、标点符号、数字、英文大小写字母；

欧洲人不乐意了，字母符号不够用

EASCII延伸美国标准信息交换码：
	在ASCII上扩充了表格符号、计算符号、希腊字母和特殊的拉丁符号；
	0-127段和ASCII完全相同，不同的是添加了128-255段；

中国人又不乐意了，10几万的汉字根本不够用，发明了GB2312、GBK等一些列字符编码，使用两个Byte表示一个汉字

GB2312中华人民共和国国家标准简体中文字符集：共包含7445个字符，6763个汉字和682个其他字符（拉丁字母、希腊字母、日文平假名及片假名字母、俄语西里尔字母），*每个汉子以两个字节表示*

台湾人用的事繁体字，他们又不乐意了

BIG5：共收录13,060个汉字及441个符号，*同样使用两个字节表示*

其他国家也有自己的文字他们也在定制自己的编码，乱成一锅粥了，同一个二进制在不同的编码放方案下表示的是不同的字符，这时一些国际组织站出来做编码统一这件事；

创建了Unicode
	Unicode只是一个符号集
		Unicode从0开始为每个符号指定了一个编号，叫做“码点”；例如码点0的符号就是null`U+0000 = null`；
	只规定了符号的二进制代码，没有规定这个二级制代码应该如何存储
		比如汉字“严”的十六进制数是`4E25`,转换为二级制是`100111000100101`共15位，至少需要2个Byte，但是也可以使用3个或4个Byte
	那么问题来了
		1. 如何区分Unicode和ASCII，计算机无法判别三个Byte是表示一个Unicode字符还是三个ASCII字符
		2. 假设规定使用三个Byte表示一个Unicode字符，那么对于英文字母和数字这种使用一个Byte就可以表示的字符是极大的浪费

最后形成了多种Unicode编码实现方案，UTF-8是互联网使用最广的一种方式；
	UTF-8：变长编码方案，1~4Byte变长编码方案
		ASCII使用1Byte，所以UTF-8和ASCII完全兼容
		汉字使用3Byte
	UTF-16：使用2Byte和4Byte变长编码
		第一平面使用2Btye
		其它平面使用4Btye
	UTF-32：使用4Btye对应一个码点

	
##JavaScript使用的编码
JavaScript使用Unicode字符集，但是使用UCS-2编码方案

UCS-2是什么鬼？
UCS-2也是Unicode的一种实现方案，但是发布时间较早，只实现了Unicode的第一个平面；之后推出的UTF-16是UCS-2的超集，同样使用2Byte实现第一平面，使用4Byte实现其它平面；另外还有UCS-4；
因为JavaScript出现的时候还没有UTF-16，所以...；
带来的问题：
	JavaScript只能处理UCS-2编码，如果遇到4Btye的字符会当作两个字符来处理

中文：张三
Unicode：\u5f20\u4e09
UTF-8：&#x5F20;&#x4E09;

##URL编码
URL只能使用英文字母、阿拉伯数字和某些标点符号，不能使用其他文字和符号；
URL中如果有汉字就必须编码后使用；
在不同的浏览器中针对不同请求(资源请求、条件查询、get、post、ajax..)使用的编码方式不同，太崩溃了，所以在发送前要在浏览器之前进行编码，让浏览器歇着；
+ `escape()`和`unescape()`：已经不建议使用
	* 作用：返回*Unicode编码值*，除ASCII字母、数字、标点符号"@ * _ + - . /"以外，对其他所有字符进行编码；
+ `encodeURI`和`decodeURI`：URL编码
	* 作用：返回*utf-8形式*，对常见符号以及一些网址中一些特殊符号(; / ? : @ & = + $ , #)不进行编码
+ `encodeURIComponent`和`decodeURIComponent`：对整个URL进行编码，包括特殊字符(; / ? : @ & = + $ , #)
	



参考文献
[字符编码笔记：ASCII，Unicode和UTF-8](http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html)
[字符编码的前世今生](http://www.smallni.com/character-encoding/)
[Unicode与JavaScript详解](http://www.ruanyifeng.com/blog/2014/12/unicode.html)
[关于URL编码](http://www.ruanyifeng.com/blog/2010/02/url_encoding.html)