#JavaScript 变量和数据类型；


##变量
> 变量时对值的引用；
> JavaScript是动态语言，声明变量时不需要指定变量类型；也可以被反复赋不同类型的值；


#####变量的声明和作用域：

> JavaScript使用`var`声明变量，变量的作用域被限制在函数体内；
> 直接对未声明的变量赋值会生成全局变量，*即使在函数体内也会生成全局变量*；
> 使用`var`生成的全局变量`delete`无效，但是不使用`var`生成的全局变量使用`delete`删除生效；
> `strict`模式下会强制使用`var`进行变量声明；
> JavaScript允许变量重复声明，重复声明不会报错也不会；重复声明*并赋值*，则会覆盖变量之前的值；


##数据类型

#####1.Number
+ 不区分整数和浮点数，123,12.3,1.23*e3,-123,NaN,Infinity都是合法的Number类型
+ NaN：是一个特殊的Number，表示非数字；
	- NaN与所有值都不相等，包括它自己：`NaN == NaN//false`；
	- `NaN`参与的计算结果均为`NaN`;
	- 唯一判断`NaN`的方法是通过`isNaN()`函数：`isNaN('number')//true`；
	- `isNaN`函数会对传入的参数进行数字转换，所以当`isNaN`返回为`true`时不一定是`NaN`,例:`isNaN('abc') => true`

转换方法
+ `parseInt()`：将字符串或小数转化为整数
	* `parseInt`会自动忽略字符串头部空格；
	* 转换从前到后进行转换，遇到无法转换的字符停止转换，返回已转换部分；
	* 如果第一个字符就无法转换返回`NaN`
	* `parseInt`可以接受第二个参数，用于指定转换进制
+ `pareseFloat()`：字符串转浮点数
	* 同`parseInt()`，`parseFloat()`会转换第一个`.`后为小数部分；


#####2 String

多行字符串：可以使用`\`进行字符串分行，使代码更加可读；例：

	var doc = '<p>\
			content\
		</p>'

可以使用下标获取字符串指定位置的字符
字符串是不可变的，使用索引修改字符串指的位置字符不会报错，也不会有任何效果

常用方法
+ `toUpperCase()`
+ `toLowerCase()`
+ `indexOf(str)`：返回指定字符串出现的位置，没有匹配返回-1；
+ `substring(start[,end])`：返回索引区域字符串
	* 从start开始，到end不包括end；
	* 只有start参数，则返回从start开始到末尾；
+ `stringObject.replace(regexp/substr,replacement)`：字符串替换方法
	* `stringObject`：被替换字符串
	* `regexp/substr`：必须属性，要替换的字符串或正则表达式(正则表达式如果不加全局声明`/g`，那么默认替换第一个匹配的部分)
	* `replacement`：可以是字符串也可以是函数
		- 字符串：每个匹配字符串均由该字符串替换
		- 特殊字符串：
			+ `$1、$2、...、$99`:与 regexp 中的第 1 到第 99 个子表达式相匹配的文本。
			+ `$&`:与 regexp 相匹配的子串。
			+ `$\``:位于匹配子串左侧的文本。
			+ `$'`:位于匹配子串右侧的文本。
			+ `$$`:直接量符号。
		- 函数：每个匹配都调用该函数，函数返回的文本将作为替换文本；
			+ 第一个参数：匹配字符串
			+ 中间参数为子表达式（正则表达式括号内的匹配的内容）匹配字符串，个数不限.( $i (i:1-99))
			+ 倒数第二个参数为匹配文本字符串的匹配下标位置。
			+ 最后一个参数是 stringObject 本身

#####3 Boolean
#####4 null：表示空值，是原型链的终点
#####5 undefined：表示“未定义”，声明为初始化的变量值为`undefined`

#####6 Object：key:value键值对组成的无序集合
创建对象
+ `{}`
+ `new Object()`
+ `Object.create(null)`
属性读取
+ JavaScript键值对的key值均为String类型(JavaScript会自动对Key值进行toString())，值可以为任意类型；
+ `Object.keys(obj)`：返回对象自身可枚举属性
+ `Object.getOwnPropertyNames(obj)`：返回对象自身全部属性
属性检测
+ 直接获取，`obj.a`如果未声明则返回`undeined`
+ `in`：可以使用`in`判断一个对象是否有某属性；
+ `hasOwnProperty()`：`in`可以判断对象是否有某属性，但是这个属性可能是继承来的；可以使用`hasOwnProperty`方法判断是否是继承来的属性
对象属性删除：`delete`：
+ 删除成功返回`true`，失败返回`false`，删除一个不存在的属性不会报错，也返回`true`;
+ delete只能删除对象本身属性，不能删除继承来的属性；

+ 对象属性模型对象：`Object.getOwnPropertyDescriptor(obj,attrname)`

	var o = { p: 'a' };
	Object.getOwnPropertyDescriptor(o, 'p')
	// Object { value: "a", writable: true, enumerable: true, configurable: true}

	* value：表示该属性的值，默认为undefined。
	* writable：表示该属性的值（value）是否可以改变，默认为true。只允许从`false`改为`true`
	* enumerable： 表示该属性是否可枚举，默认为true。如果设为false，会使得某些操作（比如for...in循环、Object.keys()）跳过该属性。
	* configurable：表示“可配置性”，默认为true。如果设为false，将阻止某些操作改写该属性，比如，无法删除该属性，也不得改变该属性的attributes对象（value属性除外），也就是说，configurable属性控制了attributes对象的可写性。
		- 使用`var`声明的变量`configurable`为`false`
		- 直接赋值的方法声明变量`configurable`为`true`
	* get：表示该属性的取值函数（getter），默认为undefined。
	* set：表示该属性的存值函数（setter），默认为undefined。
+ 对象属性定义：`Object.defineProperty()，Object.defineProperties()`

Object.defineProperty方法允许通过定义attributes对象，来定义或修改一个属性，然后返回修改后的对象
	
	var o = Object.defineProperty({}, "p", {
	        value: 123,
	        writable: false,
	        enumerable: true,
	        configurable: false
	});

+ 对象实例方法：
	* `valueOf()`：返回当前对象对应值，主要用途自动类型转换会调用该方法
	```
	可以重写覆盖该方法实现自己想要的效果
	var o = new Object();
	o.valueOf = function (){return 2;};
	1 + o // 3
	```
	* `toString()`：返回当前对象对应字符串形式，可以自定义toString方法，得到想要的字符串形式
	* `propertyIsEnumerable(attr)`：判断对象属性是否可枚举
	* `hasOwnProperty()`：判断某个属性是否为当前对象自身的属性
	* `isPrototypeOf()`：判断当前对象是否为另一个对象的原型



##类型检测

#####1.typeof

原始类型

	typeof 123 // "number"
	typeof '123' // "string"
	typeof false // "boolean"

函数

	function f() {}
	typeof f // "function"

undefined

	undefined
	typeof undefined // "undefined"

其他类型都返回"object"

	typeof window // "object"
	typeof {} // "object"
	typeof [] // "object"
	typeof null // "object"

#####2.instanceof
#####3.Object.prototype.toString

	Object.prototype.toString.apply(1);//[object Number]

+ 数值：返回[object Number]。
+ 字符串：返回[object String]。
+ 布尔值：返回[object Boolean]。
+ undefined：返回[object Undefined]。
+ null：返回[object Null]。
+ 数组：返回[object Array]。
+ arguments对象：返回[object Arguments]。
+ 函数：返回[object Function]。
+ Error对象：返回[object Error]。
+ Date对象：返回[object Date]。
+ RegExp对象：返回[object RegExp]。
+ 其他对象：返回[object " + 构造函数的名称 + "]。

#####4.Array.isArray()

##[运算与类型转换](http://javascript.ruanyifeng.com/grammar/conversion.html)

#####1.数字运算

+ 浮点数在运算的过程无法精确表示无限循环小数，所以会产生误差`1 / 3 === (1 - 2/3)//false`
+ 加法：'+'
	* 数字和字符串相加，字符串拼接；常用数字转字符串方法：`1 + ''`；
+ 其他：其他算数运算符一律专为数字运算；
+ 取余：获取相除余数部分，*结果正负由第一个运算子的符号决定*

#####2.比较运算

+ `==`：会自动转换数据类型再进行比较
+ `===`：不会自动转换数据类型，如果数据类型不一致，返回`false`，推荐使用`===`进行比较运算


#####强制转换
+ `Number()`：
	* 数值=>原值
	* 字符串=>相应数值或`NaN`，**空字符串转化为`0`**
	* 布尔值=>`ture->1`，`false->0`
	* undefined=>`NaN`
	* null=>`0`
	* object
		- 先调用对象自身的valueOf方法，如果该方法返回原始类型的值（数值、字符串和布尔值），则直接对该值使用Number方法，不再进行后续步骤。
		- 如果valueOf方法返回复合类型的值，再调用对象自身的toString方法，如果toString方法返回原始类型的值，则对该值使用Number方法，不再进行后续步骤。
		- 如果toString方法返回的是复合类型的值，则报错。
+ `String()`:
	* 数值=>相应字符串
	* 字符串=>原值
	* 布尔值=>`ture`->`'true'`，`false`->`'false'`
	* undefined=>`'undefined'`
	* null=>`'null'`
	* object
		- 先调用toString方法，如果toString方法返回的是原始类型的值，则对该值使用String方法，不再进行以下步骤。
		- 如果toString方法返回的是复合类型的值，再调用valueOf方法，如果valueOf方法返回的是原始类型的值，则对该值使用String方法，不再进行以下步骤。
		- 如果valueOf方法返回的是复合类型的值，则报错。
+ `Boolean()`：
	* JavaScript把`null`、`undefined`、`0`、`NaN`和空字符串`''`视为`false`，其他值一概视为`true`

#####自动转换
+ 预期为`Boolean`类型时(例条件判断)，系统会自动调用`Boolean()`方法
+ 预期为`String`类型时(例字符串加法)，系统调用`String()`强制转换
+ 预期为`Number`类型时(例减法运算)，系统调用`Number()`强制转换
+ 加法运算符规则
	* 只要有一个为字符串类型，就全部转换为字符串，进行字符串拼接
	* 布尔值和数字会将布尔值转换为数字
	* 有符合类型参与的运算，先进行`valueOf()`，如果返回值也为符合类型则调用`toString()`方法

