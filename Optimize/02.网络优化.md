#前端性能优化-网络相关

##网页加载渲染流程
+ Step1、DNS寻址及IP解析
+ Step2、TCP链接
+ Step3、请求、响应、文档下载
    * 同步加载
    * 分级加载
    * 按需加载
+ Step4、文档解析渲染
    * 4.1 DOM树生成
    * 4.2 Render树生成
    * 4.3 加载外部资源、渲染页面

##性能优化方向
+ 减少请求数：样式脚本合并、图片合并及替代、
+ 优化带宽：GZip，C图片压缩、代码压缩去重
+ 利用缓存： 使用CDN、利用客户端缓存、减少DNS查询、请求缓存
+ 加载策略：延迟加载、预加载

##DNS优化加快连接建立
DNS预解析，客户端可以提前进行DNS解析并缓存，之后的请求可以直接使用缓存，提升速度页面加载速度。浏览器默认会自动扫描当前页面中domain并进行DNS解析，这个解析过程不会阻碍页面的渲染。一般情况下浏览器仅会扫描HTML页面中出现的domain，在HTML之外的domain(例如JavaScript请求、或者是站点内其他页面使用的DNS)浏览器不会自动进行预加载。我们可以设置预解析列表，如下：
``` HTML
<link rel="dns-prefetch" href="//example.com">
<link rel="dns-prefetch" href="https://ajax.googleapis.com">
```

##合理利用并发，加速资源下载
浏览器阻塞：浏览器对应同一个域名同时建立的连接数量是有限制的，不同厂商各有区别，最多不要超过8个，当请求数量超过最大限制后，后面的请求会被阻塞。
建立多个连接同时进行下载可以提升下载速度，但是建立连接是比较费时的，需要根据具体项目进行优化。


// TODO
##利用本地缓存

// TODO
##预加载
在主要内容加载完成之后加载，利用浏览器空闲时间下载
<link rel="prefetch" href="login-modal-chunk.js">

和主要内容并行加载，
<link rel="preload" href="https://mat1.gtimg.com/pingjs/ext2020/xw-next/_next/32a2a1a3-fe76-474a-9c6b-5733faaa82cd/main.js"
    as="script" />
