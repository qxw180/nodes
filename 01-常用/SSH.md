# Linux SSH 和远程控制

SSH 是一种用于计算机之间通信的网路协议

## 远程登录

### 登录过程

1. 请求：远程主机收到用户的登录请求，把自己的公钥发给用户；
2. 加密：用户使用这个公钥，将登录密码加密后发送回来；
3. 验证：远程主机用自己的私钥解密登录密码，验证登录；

### 公钥登录

每次都使用密码登录非常麻烦，SSH 提供了公钥登录，可以省去密码输入：

1. 用户自己生成密钥对，将公钥存储在远程主机；
2. 登录的时候，远程主机会发送一段随机字符串
3. 用户使用自己的私钥加密字符串后再返回给远程主机
4. 远程主机使用事先上传的公钥进行解密，解密成功完成登录

### 使用 ssh-keygen 生成秘钥对

1. 运行`ssh-keygen`，一路回车，可以设置密码，运行结束后在`~/.ssh/`目录下会生成公钥`id_rsa.pub`和私钥`id_rsa`两个文件
2. 运行`ssh-copy-id user@host`上传公钥到服务器

#### Github SSH 链接

1. 生成密钥对
2. 登录 github，在`Seetings > SSH keys`下点击`Add SSH key`
3. 在`Title`输入名字,方便记忆管理；在`Key`输入生成的公钥内容
4. 点击`Add key`按钮完成添加
5. 再次进行 Github 远程操作时无须输入密码

> windows 下生成密钥对
>
> 1. 安装 git 客户端
> 2. 运行 gitbash
> 3. 输入`ssh-keygen -t rsa`，会在`C:\Users\Administrator[这里替换成你的用户名]\.ssh`目录下生成密钥对
> 4. 同上操作在 Github 中添加公钥

---

## 服务配置

> SSH 配置文件位置：`/etc/ssh/sshd_config`
> SSH 默认端口：`22`
