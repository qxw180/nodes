#Webpack 基础
> 可以将一堆模块(module)打包在一起生成一个bundle(捆绑，束)
> webpack适合大型单页面web程序的构建

1. Code Splitting：webpack有两种依赖关系，同步依赖和异步依赖，异步依赖模块作为一个分割点，形成一个新的chunk。
2. Loaders：webpack本身只能处理JavaScript，通过loader可以把其他资源转化到为JavaScript，这样所有的资源就都是模块了。
3. Clever parsing：webpack几乎可以处理所有的第三方库。支持最流行的模块化规范AMD和CommonJS。
4. Plugins system：webpack提供了一个丰富的插件系统，大多数内部特性都依赖于这个插件系统。你可以通过插件系统定制的webpack。

##Use Webpack with CLI(Command Line Interface)
`webpack <entry> <output>`
+ `entry`：入口文件
+ `output`：输出bundle
+ `--config XXX.js`：使用另一份配置文件（比如webpack.config2.js）来打包
+ `--watch`：监听变动并自动打包
+ `-p`：压缩混淆脚本
+ `-d`：生成map映射文件

##Use Webpack with Node.js
	
	// short way
	var webpack = requier('webpack');
	
	webpack(
		{
			// 配置
		},
		function(err,stats){
			// ...
		}
	)


	// long way
	var webpack = requier('webpack');

	var compiler = webpack({
			// 配置
	});
	// 构建bundle，然后执行回调函数
	compiler.run(function(err,stats){
		// ...
	});
	// 或者，构建bundle，然后开启监听。
	compiler.watch({
		aggregateTimeout: 300, // 在一个修改之后等待下一个修改的时间，默认300毫秒
		poll: true // 使用轮休代替本地监听，设置为true则使用默认间隔，设置一个数字则使用该数字时长的间隔
	}function(err,stats){
		// ...
	})

回调函数`function(err,stats){}`

+ `stats.hasError()`
+ `stats.hasWarning()`
+ `stats.toJson(opts|keyword)`
	* `keyword`
		- `none` (or false) output nothing
		- `errors-only` only output when errors happen
		- `minimal` only output when errors or a new compilation happen
		- `normal` (or true) standard output
		- `verbose` output all the information webpack has
	* `opts`
		- `opts.context` (string) context directory for request shortening
		- `opts.hash` add the hash of the compilation
		- `opts.version` add webpack version information
		- `opts.timings` add timing information
		- `opts.assets` add assets information
		- `opts.chunks` add chunk information (setting this to false allows for a less verbose output)
		- `opts.chunkModules` add built modules information to chunk information
		- `opts.modules` add built modules information
		- `opts.children` add children information
		- `opts.cached` add also information about cached (not built) modules
		- `opts.reasons` add information about the reasons why modules are included
		- `opts.source` add the source code of modules
		- `opts.errorDetails` add details to errors (like resolving log)
		- `opts.chunkOrigins` add the origins of chunks and chunk merging info
		- `opts.modulesSort` (string) sort the modules by that field
		- `opts.chunksSort` (string) sort the chunks by that field
		- `opts.assetsSort` (string) sort the assets by that field
+ `stats.toSting(options)`：返回一个格式化的字符串，参数和toJson相同


##Use Webpack with Configuration
> webpack支持通过配置文件进行处理，可以通过CLI和Node.js调用配置文件；

Type1. CLI 默认调用`webpack.config.js`：webpack配置文件是应该CommonJS模块；
`webpack.config.js`：webpack配置文件并不是一个JSON文件，而是一个CommonJS模块，你可以在里面写任何JavaScript代码；
也可以使用`--config`选项指的配置文件；

Type2. node.js会把牌子对象作为一个参数使用

	webpack({//configObject},function(err,stats){})

这两种方式都支持使用一组配置文件，这些配置会平行执行；这样可以共享文件系统缓存和监听器，比多次调用单个任务更高效；

	modules.exports = {
		// entry选项的基目录(绝对路径)，默认为process.cwd()
		context: __dirname + "/app",
		// 入口，
		entry: './entry', 
		// 输出配置
		output: { 
			path: './bin',
			filename: '[name].bundle.js'
		},
		module: {
			loaders: [
				{
					test: '/\.js$/', // 匹配规则
					exclude: `/node_modules/`, // 排除文件
					loader: 'babel-loader' 
				}
			]
		},
		plugins: {
			new webpack.optimize.UglifyPlugin({
				compress: {
					warnings: false
				},
				output: {
					comments: false
				}
			})
		}
	}


+ `context`：`entry`选项的基目录(绝对路径)，默认值：`process.cwd()`
+ `entry`：bundle入口，可以为字符串、数组或对象；
	* Type1：输入为String，指定启动时加载的模块；
	* Type2: 输入为Array，在启动时加载所有模块，最后输出一个bundle；
	* Type3：输入为Object，创建多个bundle入口，key值为chunk的name，值可以为字符串或数组；
+ `output`：输出配置，在有多个entry的情况下可以只配置一个output；
	* `output.filename`：输出bundle文件名，这里只是用来指定输出文件名，不能用来指定输出路径；
		- 输出单个文件：直接指定输出文件名字符串；
		- 输出多个文件：使用以下替代符保证输出的文件名不重复
			+ `[anme]`：使用入口chunk的文件名
			+ `[hash]`：使用编译结果的hash值
			+ `[chunkhash]`：使用入口chunk的hash值
	* `output.path`：bundle输出目录，应该是一个绝对路径
	* `output.publicPath`：用于指定输出文件中访问的URL路径。例如在css中引入图片或字体文件，在webpack打包的过程中是使用`url-laoder`或`file-loader`进行打包，在打包的过程中可以使用`output.publicPath`来进行路径定制。
	* `output.chunkFilename`：非入口文件输出命名规则
	* `output.sourceMapFilename`：SourceMap文件输出命名规则
	* `output.devtoolModuleFilenameTemplate`
	* `output.devtoolFallbackModuleFielnameTmeplate`
	* `output.devtoolLineToLine`
	* `output.hotUpdateChunkFilename`
	* `output.hotUpdateMainFilename`
	* `output.pathinfo`
	* `output.library`
	* `output.libraryTarget`
	* `output.umdNamedDefine`
	* `output.sourcePrefix`
	* `output.crossOriginLoading`

##Plugins

