#Cookies `document.cookie`
> Cookie是服务器为了标识用户身份，在浏览器保存的一小段文本信息；
> 浏览器每次向服务器发送请求都会带上这段信息(request头信息)，以识别用户信息；
> 在request头信息中只包含cookie的key和value，不包含cookie的失效时间等其它信息；
> cookie有大小限制，大约4K左右；

##Cookie的属性
`name`：每个cookie的统一标识符；不区分大小写；

`value`：
必须属性，cookie的值；
不能出现分号`;`、逗号`,`、等号`=`、空格` `，如包括则存储的时候必须使用`encodeURIComponent()`进行编码；

`expires`：
指定cookie的过期时间，采用`Data.toUTCString()`格式；
如果不指定或者设置为`null`，那么等浏览器关闭则被删除；

`domain`：
指定cookie的所在域，如果未指定默认为当前页面的域名；
在访问的时候只有域名一致cookie才会发送到服务器；
如`example.com`、`.example.com`(该写法对所有子域名均生效)、`do.example.com`
*同源策略*：
出于安全考虑，网站不能访问由其它域创建的cookie；
只要求端口和域名相同；

`path`：
指定cookie的路径，必须为绝对路径，默认为当前页面的路径；
在访问服务器的时候只有path匹配(非绝对匹配，`\blog`和`\bloglist`匹配)cookie才会发送到服务器；
path属性生效的前提是domain属性匹配；

`secure`：
指定cookie只能在HTTPS下发送到服务器；

`max-age`：
指定cookie的有效期，单位秒；

`HttpOnly`：
设置cookie不能被javascrip读取；



##获取cookie
> 使用JavaScript获取Cookie是一个字符串，包含了以分好分割的键值对；
	
	var allCookies = document.cookie;
	// 

##写入cookie
> 通过对`document.cookie`赋值可以写入或修改cookie；
> 当key、path、domain一致时会修改cookie的值；
> cookie的值中不允许出现逗号、分号或空格这些特殊符号，可以使用`encodeURIComponent()`处理；

	document.cookie = 'key=value;expires=date;path=/;domain=...'

##删除cookie
> JavaScript没有提供专门的API删除cookie，可以通过设置cookie的过期时间删除；

	document.cookie = 'key=value;expires=0';


##封装cookie操作类；

1. 需要解决的问题
	1. 因为cookie的值中不能有特殊符号需要编码和解码；
2. 功能
	1. cookie添加
	2. cookie修改
	3. cookie删除

---

	var docCookies = {
	  	getItem: function (sKey) {
	    	return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*" + encodeURIComponent(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=\\s*([^;]*).*$)|^.*$"), "$1")) || null;
	  	},
	  	setItem: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {
	    	if (!sKey || /^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)) { return false; }
	    	var sExpires = "";
	    	if (vEnd) {
	      		switch (vEnd.constructor) {
	        		case Number:
	          			sExpires = vEnd === Infinity ? "; expires=Fri, 31 Dec 9999 23:59:59 GMT" : "; max-age=" + vEnd;
	          			break;
	        		case String:
	          			sExpires = "; expires=" + vEnd;
	          			break;
			        case Date:
	          			sExpires = "; expires=" + vEnd.toUTCString();
	          			break;
	      		}
	    	}
	    	document.cookie = encodeURIComponent(sKey) + "=" + encodeURIComponent(sValue) + sExpires + (sDomain ? "; domain=" + sDomain : "") + (sPath ? "; path=" + sPath : "") + (bSecure ? "; secure" : "");
	    	return true;
	  	},
	  	removeItem: function (sKey, sPath, sDomain) {
	    	if (!sKey || !this.hasItem(sKey)) { return false; }
	    	document.cookie = encodeURIComponent(sKey) + "=; expires=Thu, 01 Jan 1970 00:00:00 GMT" + ( sDomain ? "; domain=" + sDomain : "") + ( sPath ? "; path=" + sPath : "");
	    	return true;
	  	},
	  	hasItem: function (sKey) {
	    	return (new RegExp("(?:^|;\\s*)" + encodeURIComponent(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=")).test(document.cookie);
	  	},
	  	keys: /* optional method: you can safely remove it! */ function () {
	    	var aKeys = document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g, "").split(/\s*(?:\=[^;]*)?;\s*/);
	    	for (var nIdx = 0; nIdx < aKeys.length; nIdx++) { aKeys[nIdx] = decodeURIComponent(aKeys[nIdx]); }
	    	return aKeys;
	  	}
	};

	// API
	docCookies.setItem(name, value[, end[, path[, domain[, secure]]]]);
	docCookies.getItem(name);
	docCookies.removeItem(name[, path],domain);
	docCookies.hasItem(name);
	docCookies.keys();

##参考
[Document.cookie](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie)

