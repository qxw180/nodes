#Cookies
> Cookie是服务器保存在浏览器的一小段文本信息；
> 浏览器每次向服务器发送请求都会带上这段信息(request头信息)，浏览器就可以识别你的身份做个性化响应；
> 在request头信息中只包含cookie的key和value，不包含cookie的失效时间等其它信息；
> cookie有大小限制，大约4K左右；

##Cookie的属性
`name`：每个cookie的统一标识符；不区分大小写；

`value`：
必须属性，cookie的值；
不能出现`;`、`,`、`=`、` `，如包括则存储的时候必须使用`encodeURIComponent()`进行编码；

`expires`：
指定cookie的过期时间，采用`Data.toUTCString()`格式；
如果不指定或者设置为`null`，那么等浏览器关闭则被删除；

`domain`：
指定cookie的所在域，如果未指定默认为该cookie的域名；
在访问的时候只有域名一致cookie才会发送到服务器；
如`example.com`、`.example.com`(该写法对所有子域名均生效)、`do.example.com`
*同源策略*：
出于安全考虑，网站不能访问由其它域创建的cookie；
只要求端口和域名相同；

`path`：
指定cookie的路径，必须为绝对路径，默认为当前页面的路径；
在访问服务器的时候只有path匹配(非绝对匹配`\blog`和`\bloglist`匹配)cookie才会发送到服务器；
path属性生效的前提是domain属性匹配；

`secure`：
指定cookie只能在HTTPS下发送到服务器；

`max-age`：
指定cookie的有效期，单位秒；

`HttpOnly`：
设置cookie不能被javascrip读取；

##使用javascript操作cookie

获取cookie
	
	var allCookies = document.cookie;

写入cookie

	document.cookie = 'key=value;expires=date;path=/;domain=...'

> document.cookie每次只能写入一个Cookie；写入cookie不是覆盖，而是添加；
> 当key、path、domain一致时会修改cookie的值；
> 

删除cookie

	document.cookie = 'key=value;expires=0';

javascript没有提供专门的API删除cookie，可以通过设置cookie的过期时间删除；


##封装cookie操作类；

1. 需要解决的问题
	1. 因为cookie的值中不能有特殊符号需要编码和解码；
2. 功能
	1. cookie添加
	2. cookie修改
	3. cookie删除

---

	var Cookie = function(){
		this.init();
	}
	Cookie.prototype.init = function(){
		var _self = this;
		this.items = {};
		document.cookie.split(";").map(function(item){
			var tmp = item.split("=");
			_self.items[tmp[0].trim()] = tmp[1].trim();
		});

	}
	Cookie.prototype.getItem = function(key){
		return this.items[key];
	}
	Cookie.prototype.addItem = function(key,value,days,path,domain){
		var endDay = (new Date()).setTime((new Date()).getTime() + 3600000 * days);
		document.cookie = key + "=" + value + ";path=path;domain=" + domain+";expires=" + endDay.toGMTString();
	}
	Cookie.prototype.removeItem = function(key){
		document.cookie = key+"=0;expires=Thu, 01 Jan 1970 00:00:00 GMT;path="+path+";domain="+domain;
	}

	String.prototype.trim = function() {
		return this.replace(/^\s\s*/, '').replace(/\s\s*$/, '');
	}
