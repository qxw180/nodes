# DNS

DNS(Domain Name System)是一个提供通过域名获取 IP 地址的网络服务。

互联网为了定义连入的电脑，为每一台连入的电脑都分配了一个唯一的地址标识即 IP 地址，像这个样子`45.652.3.2`；
但是这个纯数字的地址没有任何意义，实在是不好记；所以就发明了域名这个东西，例如`http://www.github.com`，也就是给 IP 地址起了一个有意义的别名；

## 域名的结构

以`www.qq.com`为例`.com`为顶级域名，`.qq`为二级域名。
按照功能划分，顶级域划分为通用顶级域（com、org、net 等）和国家与地区顶级域（cn、hk、us、tw 等）。

## DNS 查询过程

1. 缓存查询
   1. 从浏览器自设的缓存查找，这个缓存的时间比较短(1 分钟左右)，容量也比较小(1000 条左右)，如果没找到继续
   2. 从操作系统缓存中获取，如果没找到继续
   3. 从系统`host`文件中查找(修改`host`文件实现翻墙是一个好办法)，如果没找到继续
2. DNS 查询：向本地 DNS 服务器(一般为运营商)通过以下步骤获取 IP 地址，以`http://www.github.com`为例
   1. 首先查看查找自身缓存，如果找不到继续
   2. 向根域发起访问，根域会告诉`.com`域的 IP 地址，
   3. 然后向`.com`根域发起访问，然后`.com`服务告诉`github.com`的 IP 地址
   4. ...依次列推
   5. 然后获取的 IP 地址返回给浏览器
3. 当然还有一些及特殊情况意思几步都找不到的情况，这里不做讨论；

![DNS查询](../../../assets/images/network/DNS.png)
